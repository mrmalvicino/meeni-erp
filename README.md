# Meeni ERP

&nbsp;
Meeni ERP is a simple enterprise resource planning software. It performs quotations, registers sales, manages stock, schedules purchases, and keeps the accounting.

- **Web-Based Platform**: Accessible from any device with an internet connection.
- **Multi-Tenancy Support**: Supports multiple organizations, allowing independent use by different businesses.

## TOC

- [Meeni ERP](#meeni-erp)
	- [TOC](#toc)
	- [Features](#features)
	- [Technical Overview](#technical-overview)
	- [Setup Instructions](#setup-instructions)
		- [Database Generation](#database-generation)
		- [Configuration Parameters](#configuration-parameters)
		- [NuGet Packages](#nuget-packages)
	- [License and Contributions](#license-and-contributions)

## Features

&nbsp;
Meeni ERP offers the following functionalities:
- **Quotations Management**: Create and manage customer quotations efficiently.
- **Sales Tracking**: Register and monitor sales transactions.
- **Inventory Management**: Keep track of stock levels and movements.
- **Purchase Scheduling**: Plan and organize purchases to maintain supply flow.
- **Accounting**: Simplify financial record-keeping and reporting.

## Technical Overview
- **Frontend**: ASP.NET WebForms with HTML and CSS for responsive design.
- **Backend**: C# for business logic and data management.
- **Database**: Microsoft SQL Server, structured to support multi-tenancy securely.

## Setup Instructions

&nbsp;
Clone the repository:
```bash
git clone https://github.com/mrmalvicino/meeni-erp.git
```

### Database Generation

&nbsp;
The database is generated by running the provided [SQL scripts](./SQL/). There are several ways of doing so:

- If you are using a **localhost**, you may run [reset_database.bat](./SQL/reset_database.bat) to automate the correct excecution of the scripts.

- If you are using a **local server with a custom path** or an **external server**, you can still use the [reset_database.bat](./SQL/reset_database.bat) script but will have to set the path and credentials manually.

> [!IMPORTANT]
&nbsp;
The fastest way to generate the database is by running the [run_reset.bat](./SQL/run_reset.bat) script to generate the database with **one click**, provided a file named `reset_input.txt` is created in the [SQL directory](./SQL/) using the following templates:

- Local server with custom path:
```txt
pause
2
CUSTOM_PATH
y
```

- External server:
```txt
pause
3
SERVER_ADDRESS_OR_IP
USERNAME
PASSWORD
y
```

> [!WARNING]
&nbsp;
If you want to use **SQL Server Management Studio** or **Azure Data Studio** to generate the database, you will have to run all the SQL scripts one by one in the correct order.

### Configuration Parameters

> [!IMPORTANT]
&nbsp;
Create a file named `Web.config` in the [WebForms](./WebForms/) directory modifying the following template code:

```xml
<?xml version="1.0" encoding="utf-8"?>
<configuration>
	<system.web>
		<compilation debug="true" targetFramework="4.8" />
		<httpRuntime targetFramework="4.8.1" />
		<customErrors mode="Off" />
		<pages>
			<namespaces>
				<add namespace="DomainModel" />
			</namespaces>
		</pages>
	</system.web>
	<system.webServer>
		<defaultDocument>
			<files>
				<add value="Home.aspx" />
			</files>
		</defaultDocument>
		<staticContent>
			<mimeMap fileExtension=".webmanifest" mimeType="application/manifest+json" />
		</staticContent>
	</system.webServer>
	<location path="Admin">
		<system.webServer>
			<defaultDocument>
				<files>
					<add value="Dashboard.aspx" />
				</files>
			</defaultDocument>
		</system.webServer>
	</location>
	<connectionStrings>
		<add name="localhost" connectionString="Data source=.\SQLEXPRESS; Initial Catalog=meeni_erp_db; integrated security=true" providerName="System.Data.SqlClient" />
		<add name="LOCAL_SERVER_NAME" connectionString="Data source=CUSTOM_PATH\SQLEXPRESS; Initial Catalog=meeni_erp_db; Integrated Security=true" providerName="System.Data.SqlClient" />
		<add name="EXTERNAL_SERVER_NAME" connectionString="Data Source=SERVER_ADDRESS_OR_IP; Initial Catalog=meeni_erp_db; User ID=USERNAME; Password=PASSWORD; Connect Timeout=30;" />
	</connectionStrings>
	<appSettings>
		<add key="mailing_api_url" value="https://send.api.mailtrap.io/api/send" />
		<add key="mailing_api_token" value="MAILING_API_TOKEN" />
		<add key="welcome_template_uuid" value="WELCOME_TEMPLATE_UUID" />
		<add key="business_email" value="EMAIL@DOMAIN.COM" />
		<add key="business_url" value="BUSINESSURL.COM" />
	</appSettings>
	<runtime>
		<assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
			<dependentAssembly>
				<assemblyIdentity name="System.Runtime.CompilerServices.Unsafe" publicKeyToken="b03f5f7f11d50a3a" culture="neutral" />
				<bindingRedirect oldVersion="0.0.0.0-6.0.1.0" newVersion="6.0.1.0" />
			</dependentAssembly>
			<dependentAssembly>
				<assemblyIdentity name="Microsoft.Bcl.AsyncInterfaces" publicKeyToken="cc7b13ffcd2ddd51" culture="neutral" />
				<bindingRedirect oldVersion="0.0.0.0-9.0.0.2" newVersion="9.0.0.2" />
			</dependentAssembly>
			<dependentAssembly>
				<assemblyIdentity name="System.Text.Json" publicKeyToken="cc7b13ffcd2ddd51" culture="neutral" />
				<bindingRedirect oldVersion="0.0.0.0-9.0.0.2" newVersion="9.0.0.2" />
			</dependentAssembly>
			<dependentAssembly>
				<assemblyIdentity name="System.Threading.Tasks.Extensions" publicKeyToken="cc7b13ffcd2ddd51" culture="neutral" />
				<bindingRedirect oldVersion="0.0.0.0-4.2.1.0" newVersion="4.2.1.0" />
			</dependentAssembly>
			<dependentAssembly>
				<assemblyIdentity name="System.Memory" publicKeyToken="cc7b13ffcd2ddd51" culture="neutral" />
				<bindingRedirect oldVersion="0.0.0.0-4.0.2.0" newVersion="4.0.2.0" />
			</dependentAssembly>
			<dependentAssembly>
				<assemblyIdentity name="System.Buffers" publicKeyToken="cc7b13ffcd2ddd51" culture="neutral" />
				<bindingRedirect oldVersion="0.0.0.0-4.0.4.0" newVersion="4.0.4.0" />
			</dependentAssembly>
			<dependentAssembly>
				<assemblyIdentity name="System.Numerics.Vectors" publicKeyToken="b03f5f7f11d50a3a" culture="neutral" />
				<bindingRedirect oldVersion="0.0.0.0-4.1.5.0" newVersion="4.1.5.0" />
			</dependentAssembly>
		</assemblyBinding>
	</runtime>
	<system.codedom>
		<compilers>
			<compiler language="c#;cs;csharp" extension=".cs" warningLevel="4" compilerOptions="/langversion:default /nowarn:1659;1699;1701;612;618" type="Microsoft.CodeDom.Providers.DotNetCompilerPlatform.CSharpCodeProvider, Microsoft.CodeDom.Providers.DotNetCompilerPlatform, Version=4.1.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
			<compiler language="vb;vbs;visualbasic;vbscript" extension=".vb" warningLevel="4" compilerOptions="/langversion:default /nowarn:41008,40000,40008 /define:_MYTYPE=\&quot;Web\&quot; /optionInfer+" type="Microsoft.CodeDom.Providers.DotNetCompilerPlatform.VBCodeProvider, Microsoft.CodeDom.Providers.DotNetCompilerPlatform, Version=4.1.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
		</compilers>
	</system.codedom>
</configuration>
```

> [!WARNING]
&nbsp;
The line `<customErrors mode="Off"/>` can be removed to **prevent sensitive data from being displayed** on public servers.

&nbsp;
The following table details the parameters which need to be modified:

| Parameter | Section | Details |
|-|-|-|
| `LOCAL_SERVER_NAME` | connectionStrings | Name of the local server that is going to be referred at the [Database class](./DataAccess/Database.cs) constructor. |
| `CUSTOM_PATH` | connectionStrings | Path where SQL Express was installed. |
| `EXTERNAL_SERVER_NAME` | connectionStrings | Name of the external server that is going to be referred at the [Database class](./DataAccess/Database.cs) constructor. |
| `SERVER_ADDRESS_OR_IP` | connectionStrings | URL address or IP of the external server. |
| `USERNAME` | connectionStrings | Username to access the external server. |
| `PASSWORD` | connectionStrings | Password to access the external server. |
| `MAILING_API_TOKEN` | appSettings | [Mailtrap](https://mailtrap.io) API token. |
| `WELCOME_TEMPLATE_UUID` | appSettings | Universal Unique Identifier for Mailtrap Welcome Email Template. |
| `EMAIL@DOMAIN.COM` | appSettings | Email address that Mailtrap will use to send emails. |
| `BUSINESSURL.COM` | appSettings | URL where the website is hosted. |

### NuGet Packages

> [!IMPORTANT]
&nbsp;
Install each of the following **NuGet Packages** for the respective projects according to the following table:

| Projects | NuGet Package | Purpose |
|-|-|-|
| WebForms | [Microsoft.CodeDom.Providers.DotNetCompilerPlatform](https://www.nuget.org/packages/Microsoft.CodeDom.Providers.DotNetCompilerPlatform/) | Compiles C# in ASPX pages. |
| DomainModel, BusinessLogic | [RestSharp](https://www.nuget.org/packages/RestSharp/) | Converts C# objects to JSON strings. |

&nbsp;
In order to install the packages using Visual Studio interface, open the [solution](./MeeniERP.sln), right click the project, select `Manage NuGet Packages...` (or select the project, go to Visual Studio menu, and select `Project > Manage NuGet Packages`) and install the latest version of each package.

## License and Contributions

&nbsp;
This is an open source project licensed under the [General GNU Public License](./LICENSE).
Contributions are welcome! Please fork the repository and create a pull request with your improvements or suggestions.
Make sure to check the [contibution guide](./CONTRIBUTING.md) before.